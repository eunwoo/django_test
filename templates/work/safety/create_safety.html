<!-- Safety form page -->
{% extends 'base/head.html' %}
{% block title %}
  Safety Check
{% endblock %}
{% block style %}
  <style>
    main {
      width: 70%;
      min-width: 1200px;
      margin: 20px auto;
    }
  </style>
{% endblock %}

{% block javascript %}
  <script type="text/javascript">
    $(document).ready(function () {
      var $user = '{{request.user.role_type}}'
      if ($user == '일반 관리자') {
        $("#id_replyDate").prop("readonly", true);
        $("#id_inChargeRevCom").prop("readonly", true);
        $("#id_managerRevCom").prop("readonly", true);
        $("#id_results").prop("readonly", true);
        $("#id_eng").prop("readonly", true);
        $("#id_gcEng").prop("readonly", true);
      } else if ($user == '현장 대리인') {
        $("#safetyform :input")
          .not("#id_doc, #id_gcSiteAgent")
          .prop("readonly", true);
      } else if ($user == '시스템 관리자') {} else if ($user == '일반 건설사업관리기술인') {
        $("#id_docNum").prop("readonly", true);
        $("#id_date").prop("readonly", true);
        $("#id_title").prop("readonly", true);
        $("#id_conType").prop("readonly", true);
        $("#id_content").prop("readonly", true);
      } else if ($user == '총괄 건설사업관리기술인') {
        $("#id_docNum").prop("readonly", true);
        $("#id_date").prop("readonly", true);
        $("#id_title").prop("readonly", true);
        $("#id_conType").prop("readonly", true);
        $("#id_content").prop("readonly", true);
      }

    });
  </script>
{% endblock %}

{% block content %}
  {% include 'base/header.html' %}
  <main>
    <div class="cont mt-4">
      {% include 'base/navbar_main.html' %}
      <section>
        <div class="container">
          <div class="row ml-0">
            <div class="col">
              <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
                <ol class="breadcrumb">
                  <li class="breadcrumb-item">
                    <a href="{% url 'work:index' %}">업무</a>
                  </li>
                  <li class="breadcrumb-item active" aria-current="page">
                    <a href="{% url 'work:safety' %}">구조 안전성 검토</a>
                  </li>
                  <li class="breadcrumb-item active" aria-current="page">구조 안전성 검토 신고서</li>
                </ol>
              </nav>
            </div>
          </div>
        </div>
      </section>
      <section>
        <div class="container">
          <div class="row">
            <div class="col-4 offset-8 ">
              <div class="row">
                <div class="col">
                  <div class="col">
                    <button class="btn1 p-2 btn btn-light col-12" aria-label="Left Align" data-bs-toggle="modal" data-bs-target="#exampleModal">저장</button>
                    <!-- Modal -->
                    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                      <div class="modal-dialog modal-dialog-centered modal-sm">
                        <div class="modal-content ">
                          <br><br>
                          <div class="modal-header" style="display:none">
                            <h5 style="margin: 0 auto;" class="modal-title fw-bold" id="exampleModalLabel">저장</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                          </div>
                          <div class="modal-body">
                            <div class="container-fluid">
                              <div class="row">
                                <div class="col-12">
                                  <label style="white-space: normal;" for="" class="col-12 fw-bold text-center">저장이 완료 되었습니다.</label>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="modal-footer" style="margin: 0 auto;">
                            <button type="submit" form="safetyform" class="btn btn-secondary" data-bs-dismiss="modal">확인</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col">
                  <button class="btn1 p-2 btn btn-light col-12" aria-label="Left Align" data-bs-toggle="modal" data-bs-target="#exampleModal1">서명 요청</button>
                  <!-- Modal -->
                  <div class="modal fade" id="exampleModal1" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered modal-sm">
                      <div class="modal-content">
                        <br><br>
                        <div class="modal-header" style="display:none">
                          <h5 style="margin: 0 auto;" class="modal-title fw-bold" id="exampleModalLabel">서명 요청</h5>
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                          <div class="container-fluid">
                            <div class="row">
                              <div class="col-12">
                                <label style="white-space: normal;" for="" class="col-12 fw-bold text-center">저장을 해주세요.</label>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="modal-footer" style="margin: 0 auto;">
                          <button type="button" class="btn btn-secondary" data-bs-target="#exampleModalToggle2" data-bs-toggle="modal">확인</button>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- Modal -->
                  <div class="modal fade" id="exampleModalToggle2" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered modal-sm">
                      <div class="modal-content">
                        <br><br>
                        <div class="modal-header" style="display:none">
                          <h5 style="margin: 0 auto;" class="modal-title fw-bold" id="exampleModalLabel">서명 요청</h5>
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                          <div class="container-fluid">
                            <div class="row">
                              <div class="col-12">
                                <label style="white-space: normal;" for="" class="col-12 fw-bold text-center">내용을 모두 작성해주세요.</label>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="modal-footer" style="margin: 0 auto;">
                          <button type="button" class="btn btn-secondary" data-bs-target="#exampleModalToggle3" data-bs-toggle="modal">확인</button>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- Modal -->
                  <div class="modal fade" id="exampleModalToggle3" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered modal-sm">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 style="margin: 0 auto;" class="modal-title fw-bold" id="exampleModalLabel">서명 요청</h5>
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                          <div class="container-fluid">
                            <div class="row">
                              <div class="col-12">
                                <label style="white-space: normal;" for="" class="col-12 text-center">수신인 지정</label>
                              </div>
                            </div>
                            <div class="row mt-2">
                              <div class="col-12">
                                <select name="" id="" class="col-12">
                                  <option value="" selected="selected" readonly="readonly">수신인을 지정해 주세요.</option>
                                  <option value="">김유지</option>
                                  <option value="">이문제</option>
                                  <option value="">청이라</option>
                                  <option value="">임아이</option>
                                </select>
                              </div>
                            </div>
                            <div class="row mt-2">
                              <div class="col-12">
                                <input type="text" placeholder="전달할 메시지를 입력해 주세요." style="white-space: normal;" class="col-12">
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="modal-footer" style="margin: 0 auto;">
                          <button type="button" class="btn btn-secondary" data-bs-target="#exampleModalToggle4" data-bs-toggle="modal">확인</button>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- Modal -->
                  <div class="modal fade" id="exampleModalToggle4" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered modal-sm">
                      <div class="modal-content">
                        <br><br>
                        <div class="modal-header" style="display:none">
                          <h5 style="margin: 0 auto;" class="modal-title fw-bold" id="exampleModalLabel">서명 요청</h5>
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                          <div class="container-fluid">
                            <div class="row">
                              <div class="col-12">
                                <label style="white-space: normal;" for="" class="fw-bold col-12 text-center">서명 요청이 완료 되었습니다</label>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="modal-footer" style="margin: 0 auto;">
                          <a href="Page1.html">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">확인</button>
                          </a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

      </section>
      <form action="" id="safetyform" name="safetyform" method="POST" enctype="multipart/form-data" novalidate="novalidate">
        {% csrf_token %}
        <section id="safety" name='safety'>
          <div class="container mt-3 mb-5" style="border: 1px solid rgb(210, 210, 210);">
            <div class="row">
              <div class="col-12 text-center my-4">
                <label style="font-size: large;" for="">구조 안전성 검토 신고서</label>
              </div>
            </div>
            <div class="mt-3 row text-center">
              <div class="col-2">
                <label for="" class="col-12" style="color: black;">문서번호</label>
              </div>
              <div class="col-4">
                {{form.docNum}}
              </div>
              <div class="col-2">
                <label for="" class=" col-12" style="color: black;">작성일자</label>
              </div>
              <div class="col-4">
                {{form.date}}
              </div>
            </div>
            <div class="mt-3 row text-center">
              <div class="col-2">
                <label for="" class="col-12" style="color: black;">제목</label>
              </div>
              <div class="col-10">
                {{form.title}}
              </div>
            </div>
            <div class="mt-3 row">
              <div class="col-2 text-center">
                <label for="" class="col-12" style="color: black;">공종</label>
              </div>
              <div class="col-10">
                {{form.conType}}
              </div>
            </div>
            <div class="mt-3 row">
              <div class="col-2 text-center justify-content-center align-items-center d-flex">
                <label for="" class="col-12" style="color: black;">내용</label>
              </div>
              <div class="col-10">
                <div class="row">
                  <div class="col-12 text-center">
                    {{form.content}}
                  </div>
                </div>
                <div class="row mt-2">
                  <div class="col-12 text-center">
                    <label for="">승인요청 하오니 검토 후 승인 바랍니다</label>
                  </div>
                </div>
                <div class="row mt-2">
                  <div class="col-2 offset-4">
                    <label for="">담당자</label>
                  </div>
                  <div class="col-2">
                    {{form.inCharge}}
                  </div>
                  <div class="col-1">
                    <label for="" class="mr-1">(인)</label>
                  </div>
                  <div class="col-1">
                    <img src="" alt="">
                  </div>
                  <div class="col-2">
                    <button data-bs-toggle="modal" data-bs-target="#exampleModal4" class="btnx">서명</button>
                    <!-- Modal -->
                    <div class="modal fade" id="exampleModal4" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                      <div class="modal-dialog modal-dialog-centered modal-sm">
                        <div class="modal-content">
                          <div class="modal-header">
                            <h5 style="margin: 0 auto;" class="modal-title fw-bold" id="exampleModalLabel">서명</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                          </div>
                          <div class="modal-body">
                            <div class="container-fluid">
                              <div class="row">
                                <div class="col-12">
                                  <label style="white-space: normal;" for="" class="col-12 text-center">결재를 위한 서명자 아이디를 입력해주세요</label>
                                </div>
                              </div>
                              <div class="mt-2 row">
                                <div class="col-12">
                                  <input class="col-12" type="password">
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="modal-footer" style="margin: 0 auto;">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">확인</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row mt-2">
                  <div class="col-2 offset-4">
                    <label for="">현장대리인</label>
                  </div>
                  <div class="col-2">
                    {{form.gcSiteAgent}}
                  </div>
                  <div class="col-1">
                    <label for="" class="mr-1">(인)</label>
                  </div>
                  <div class="col-1">
                    <img src="" alt="">
                  </div>
                </div>

              </div>
            </div>
            <div class="mt-3 row">
              <div class="col-2 text-center justify-content-center align-items-center d-flex">
                <label for="" class="col-12" style="color: black;">붙임</label>
              </div>
              <div class="col-10">
                <div class="row mt-2">
                  <div class="col-2 offset-10">
                    <button class="btnx" id="deleteAcc">삭제</button>
                  </div>
                </div>
                <div class="row mt-2">
                  <div class="col-2">
                    <div class="row mt-2">
                      <div class="col-12">
                        <label for="">구조 계산서</label>
                      </div>
                    </div>
                    <div id="preview">
                      {% for file in form.initial.doc %}
                        <a href="{{file.url}}" download="{{file.name}}">{{file.name}}</a>
                      {% endfor %}
                    </div>
                    <div class="row mt-2">
                      <div class="col-24">
                        <input type="file" name="doc_file" id="file-input" class="form-control" multiple="multiple"/>
                      </div>
                      <!-- Modal -->
                      <div class="modal fade" id="exampleModal2" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered modal-lg">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 style="margin: 0 auto;" class="modal-title fw-bold" id="exampleModalLabel">문서 불러오기</h5>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                              <div class="container-fluid">
                                <div class="row">
                                  <div class="col-3">
                                    <label style="white-space: normal;" for="" class="fs-12 fw-bold col-12">관리 대상조립 가설기자재 종류</label>
                                  </div>
                                  <div class="col-3">
                                    <button class="btnx p-2 col-12">강관 비계</button>
                                  </div>
                                  <div class="col-3">
                                    <button class="btnx p-2 col-12">시스템 비계</button>
                                  </div>
                                  <div class="col-3">
                                    <button class="btnx p-2 col-12">시스템 동바리</button>
                                  </div>
                                </div>
                                <div class="cont6">
                                  <div class="container">
                                    {% for file in doc %}
                                      <div class="row mt-2 checkbox1 checkbox">
                                        <div class="col-12">
                                          <label for="" class="col-11 checkbox1 checkbox">{{doc}}</label>
                                          <input type="checkbox" class="col-1 checkbox1 checkbox">
                                        </div>
                                      </div>
                                    {% endfor %}
                                  </div>

                                </div>
                              </div>
                            </div>
                            <div class="modal-footer" style="margin: 0 auto;">
                              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" id="moveVal">등록</button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-10">
                  <div class="row mt-2">
                    <div class="col-12" id="targetBox"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="mt-3 row text-center justify-content-center align-items-center d-flex">
            <div class="col-2">
              <label for="" class="col-12" style="color: black;">회신일자</label>
            </div>
            <div class="col-10">
              {{form.replyDate}}
            </div>
          </div>
          <div class="mt-3 row text-center justify-content-center align-items-center d-flex">
            <div class="col-2">
              <label for="" class="col-12" style="color: black;">검토 의견</label>
            </div>
            <div class="col-10">
              <div class="row mt-2">
                <div class="col-2">
                  <label for="" style="color: black;">담당자</label>
                </div>
                <div class="col-10">
                  {{form.inChargeRevCom}}
                </div>
              </div>
              <div class="row mt-2">
                <div class="col-2">
                  <label for="" style="color: black;">총괄관리자</label>
                </div>
                <div class="col-10">
                  {{form.managerRevCom}}
                </div>
              </div>
            </div>
          </div>
          <div class="mt-3 row text-center">
            <div class="col-2">
              <label for="" class="col-12" style="color: black;">결과</label>
            </div>
            <div class="col-10">
              {{form.results}}
            </div>
          </div>
          <div class="mt-3 row mb-3">
            <div class="col text-center justify-content-center align-items-center d-flex">
              <label for="" class="col-12" style="color: black;">담당 건설사업관리기술인</label>
            </div>
            <div class="col">
              {{form.eng}}
            </div>
            <div class="col">
              <label for="">(인)</label>
            </div>
            <div class="col">
              <button data-bs-toggle="modal" data-bs-target="#exampleModal4" class="btnx">서명</button>
              <!-- Modal -->
              <div class="modal fade" id="exampleModal4" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal-sm">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 style="margin: 0 auto;" class="modal-title fw-bold" id="exampleModalLabel">서명</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                      <div class="container-fluid">
                        <div class="row">
                          <div class="col-12">
                            <label style="white-space: normal;" for="" class="col-12 text-center">결재를 위한 서명자 아이디를 입력해주세요</label>
                          </div>
                        </div>
                        <div class="mt-2 row">
                          <div class="col-12">
                            <input class="col-12" type="password">
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="modal-footer" style="margin: 0 auto;">
                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">확인</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col">
              <label for="" style="color: black;">총괄 건설사업관리기술인
              </label>
            </div>
            <div class="col">
              {{form.gcEng}}
            </div>
            <div class="col">
              <label for="">(인)</label>
            </div>
            <div class="col">
              <button data-bs-toggle="modal" data-bs-target="#exampleModal4" class="btnx">서명</button>
              <!-- Modal -->
              <div class="modal fade" id="exampleModal4" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal-sm">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 style="margin: 0 auto;" class="modal-title fw-bold" id="exampleModalLabel">서명</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                      <div class="container-fluid">
                        <div class="row">
                          <div class="col-12">
                            <label style="white-space: normal;" for="" class="col-12 text-center">결재를 위한 서명자 아이디를 입력해주세요</label>
                          </div>
                        </div>
                        <div class="mt-2 row">
                          <div class="col-12">
                            <input class="col-12" type="password">
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="modal-footer" style="margin: 0 auto;">
                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">확인</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <br>
        </div>
      </section>
    </form>
  </div>
  <br><br><br><br><br>

</main>
{% endblock %}
